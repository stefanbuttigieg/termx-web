<div nz-row nzJustify="center">
  <div nz-col [nzLg]="18" [nzXs]="24">
    <ng-container *ngIf="codeSystem">

      <h1>Code System {{codeSystem.url}}</h1>
      <p><b>Summary</b></p>
      <table class="grid">
        <tbody><tr><td>Defining URL:</td><td>{{codeSystem.url}}</td></tr>
        <tr><td>Version:</td><td>{{codeSystem.version}}</td></tr>
        <tr><td>Name:</td><td>{{codeSystem.name}}</td></tr>
        <tr><td>Title:</td><td>{{codeSystem.title}}</td></tr>
        <tr><td>Definition:</td><td><p>{{codeSystem.definition}}</p></td></tr>
        <tr><td>Source Resource</td><td><a (click)="exportXml()">XML</a> / <a (click)="openJson()">JSON</a></td></tr></tbody>
      </table>
      <br/>
      <p *ngIf="valueSetUsages">This Code system is used in the following value sets:</p>
      <ul>
        <li *ngFor="let u of valueSetUsages">ValueSet: <a (click)="openValueSet(u.resource.id)">{{u.resource.id}}</a></li>
      </ul>

      <h2>{{codeSystem.name}}</h2>
      <p>This code system {{codeSystem.url}} defines the following codes:</p>
      <table class="grid">
        <thead><tr>
          <td><b>Code</b></td>
          <td colspan="2"><b>Display</b></td>
          <td colspan="2"><b>Definition</b></td>
          <td *ngFor="let p of codeSystem.property"><b>{{p.code}}</b></td>
        </tr></thead>
        <tbody><tr *ngFor="let i of codeSystem.concept">
          <td style="width: 10%">{{i.code}}</td>
          <td style="width: 5%"><div *ngFor="let d of (i.designation | apply: getDisplays)"><b>{{d.language}}</b></div></td>
          <td style="width: 25%"><div *ngFor="let d of (i.designation | apply: getDisplays)">{{d.value}}</div></td>
          <td style="width: 5%"><div *ngFor="let d of (i.designation | apply: getDefinitions)"><b>{{d.language}}</b></div></td>
          <td style="width: 25%"><div *ngFor="let d of (i.designation | apply: getDefinitions)">{{d.value}}</div></td>
          <td *ngFor="let p of codeSystem.property">{{(i.property | apply: getProperties: p.code) | apply: getPropertyValue}}</td>
        </tr></tbody>
      </table>

    </ng-container>
  </div>
</div>
