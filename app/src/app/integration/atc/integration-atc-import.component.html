<m-card>
  <m-spinner [mLoading]=loading>
    <div *m-card-header class="m-items-between">
      <nz-breadcrumb>
        <nz-breadcrumb-item>ATC</nz-breadcrumb-item>
        <nz-breadcrumb-item>ATC {{edition}} import</nz-breadcrumb-item>
      </nz-breadcrumb>
      <div class="m-items-between">
        <m-button (click)="setDefaultData()">{{'web.integration.atc.set-default-data' | translate}}</m-button>
        <m-button mDisplay="primary" [disabled]="!data.uri" (click)="import()">{{'web.integration.send-request' | translate}}</m-button>
      </div>
    </div>

    <m-form-item mLabel="web.integration.atc.import.uri">
      <m-input [(ngModel)]="data.uri"></m-input>
    </m-form-item>
    <m-form-item mLabel="web.integration.atc.import.source">
      <m-input [(ngModel)]="data.source"></m-input>
    </m-form-item>
    <m-form-item mLabel="web.integration.atc.import.version">
      <m-input [(ngModel)]="data.version"></m-input>
    </m-form-item>
    <m-form-item mLabel="web.integration.atc.import.valid">
      <nz-date-picker [(ngModel)]="data.validFrom"></nz-date-picker>
      <nz-date-picker [(ngModel)]="data.validTo"></nz-date-picker>
    </m-form-item>
    <m-form-item mLabel="web.integration.atc.import.code-system">
      <m-input [(ngModel)]="data.codeSystem"></m-input>
    </m-form-item>
    <m-form-item mLabel="web.integration.atc.import.code-system-name">
      <m-multi-language-input [(ngModel)]="data.codeSystemName"></m-multi-language-input>
    </m-form-item>
    <m-form-item mLabel="web.integration.atc.import.code-system-description">
      <m-textarea [(ngModel)]="data.codeSystemDescription"></m-textarea>
    </m-form-item>
    <m-form-item mLabel="web.integration.atc.import.code-system-version-description">
      <m-textarea [(ngModel)]="data.codeSystemVersionDescription"></m-textarea>
    </m-form-item>


    <div *ngIf="jobResponse">
      <m-alert *ngFor="let error of jobResponse.errors" mType="error" mShowIcon>
        {{error}}
      </m-alert>
      <m-alert *ngIf="!jobResponse.errors" mType="success" mShowIcon>
        Success
      </m-alert>
    </div>

  </m-spinner>
</m-card>
