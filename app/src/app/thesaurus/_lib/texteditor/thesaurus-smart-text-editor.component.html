<div *ngIf="!viewMode">
  <tw-dropdown-menu
    #optionMenu
      [containerRef]="ref"
      [lang]="lang"
      (resultComposed)="insertAtCursor($event.result, $event.range)"
  />

  <div class="equal-columns">
    <div #ref>
      <ng-container *ngIf="valueType === 'markdown'">
        <tw-thesaurus-textarea
            style="font-family: monospace"
            [(ngModel)]="value"
            (click)="optionMenu.hide()"
            (keydown)="optionMenu.handleKeyDown($event)"
            (keyup)="optionMenu.handleKeyUp($event)"
            (blur)="onTouched()"
            (ngModelChange)="fireOnChange($event)"
        />
      </ng-container>

      <ng-container *ngIf="valueType === 'html'">
        <m-quill
            [(ngModel)]="value"
            (click)="optionMenu.hide()"
            (keydown)="optionMenu.handleKeyDown($event)"
            (keyup)="optionMenu.handleKeyUp($event)"
            (blur)="onTouched()"
            (ngModelChange)="fireOnChange($event)"
        />
      </ng-container>
    </div>


    <div *ngIf="showPreview" style="background: #f7f7f7; padding: 1rem; border-radius: var(--border-radius-component)">
      <tw-smart-text-editor-view [value]="value" [valueType]="valueType" [lang]="lang" [prerendered]="true"/>
    </div>
  </div>
</div>

<tw-smart-text-editor-view *ngIf="viewMode" [value]="value" [valueType]="valueType" [lang]="lang"/>
