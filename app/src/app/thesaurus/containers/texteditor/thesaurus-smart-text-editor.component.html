<div class="input-wrapper" *ngIf="!viewMode">
  <div #dropreference id="textarea">
    <div style="display: flex">
      <ng-container *ngIf="valueType === 'markdown'">
        <tw-thesaurus-textarea style="width: 100%"
            [(ngModel)]="value"
            (click)="hideDropdown()"
            (keydown)="onKeyDown($event)"
            (keyup)="onKeyUp($event)"
            (blur)="onTouched()"
            (ngModelChange)="fireOnChange($event)"></tw-thesaurus-textarea>
      </ng-container>

      <ng-container *ngIf="valueType === 'html'">
        <m-quill style="display: grid; width: 100%"
            [(ngModel)]="value"
            (click)="hideDropdown()"
            (keydown)="onKeyDown($event)"
            (keyup)="onKeyUp($event)"
            (blur)="onTouched()"
            (ngModelChange)="fireOnChange($event)"></m-quill>
      </ng-container>

      <m-card *ngIf="showPreview" style="width: 100%; margin-left: 1rem; background: #f7f7f7; box-shadow: none;">
        <tw-smart-text-editor-view [value]="value" [valueType]="valueType" [lang]="lang"></tw-smart-text-editor-view>
      </m-card>
    </div>
  </div>
  <tw-dropdown [reference]="dropreference">
    <div class="dropdown-options-container" id="options-container">
      <tw-dropdown-option [item]="item" *ngFor="let item of popupItems" (click)="selectOption(item)"></tw-dropdown-option>
    </div>
  </tw-dropdown>
</div>

<tw-link-modal #linkModal (linkComposed)="insertOption($event)"></tw-link-modal>
<tw-structure-definition-modal #structureDefinitionModal (structureDefinitionComposed)="insertOption($event)"></tw-structure-definition-modal>
<tw-template-modal #templateModal (templateComposed)="insertOption($event)" [lang]="lang"></tw-template-modal>

<tw-smart-text-editor-view *ngIf="viewMode" [value]="value" [valueType]="valueType" [lang]="lang"></tw-smart-text-editor-view>
