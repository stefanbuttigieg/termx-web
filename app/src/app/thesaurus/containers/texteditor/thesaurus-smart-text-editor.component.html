<div class="input-wrapper">
  <div #dropreference id="textarea">
    <div style="display: flex">
      <ng-container *ngIf="valueType === 'markdown'">
        <twa-thesaurus-textarea style="width: 100%"
            [(ngModel)]="value"
            (click)="hideDropdown()"
            (keydown)="onKeyDown($event)"
            (keyup)="onKeyUp($event)"
            (blur)="onTouched()"
            (ngModelChange)="fireOnChange($event)"></twa-thesaurus-textarea>
        <m-card *ngIf="showPreview" style="width: 100%; margin-left: 1rem; background: #f7f7f7; box-shadow: none;">
          <m-markdown [mData]="value"></m-markdown>
        </m-card>
      </ng-container>

      <ng-container *ngIf="valueType === 'html'">
        <m-rich-text-editor style="display: grid; width: 100%"
            [(ngModel)]="value"
            (click)="hideDropdown()"
            (keydown)="onKeyDown($event)"
            (keyup)="onKeyUp($event)"
            (blur)="onTouched()"
            (ngModelChange)="fireOnChange($event)"></m-rich-text-editor>
        <m-card *ngIf="showPreview" style="width: 100%; margin-left: 1rem; background: #f7f7f7; box-shadow: none;">
          <m-rich-text-editor style="width: 100%" [(ngModel)]="value" mViewMode></m-rich-text-editor>
        </m-card>
      </ng-container>
    </div>
  </div>
  <twa-dropdown [reference]="dropreference">
    <div class="dropdown-options-container" id="options-container">
      <twa-dropdown-option [item]="item" *ngFor="let item of popupItems" (click)="selectOption(item)"></twa-dropdown-option>
    </div>
  </twa-dropdown>
</div>

<twa-link-modal #linkModal (linkComposed)="insertOption($event)"></twa-link-modal>
