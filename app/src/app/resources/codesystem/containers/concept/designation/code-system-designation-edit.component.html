<m-card class="m-card-inside">
  <div *m-card-header class="m-items-between">
    <div class="m-card-title">{{'entities.code-system-entity-version.designations' | translate}}</div>
    <twa-add-button *ngIf="!viewMode" (click)="modalData.visible = true">{{'web.code-system-concept-version.designation.add-designation' | translate}}</twa-add-button>
  </div>
  <div *ngIf="!loading['languages']">
    <m-card class="m-card-inside" *ngFor="let group of designationGroups">
      <twa-code-system-designation-group-edit [viewMode]="viewMode"
          [designationGroup]="group"
          [supportedLangs]="supportedLangs"
          [entityProperties]="entityProperties"></twa-code-system-designation-group-edit>
    </m-card>
  </div>
</m-card>

<m-modal [(mVisible)]="modalData.visible" (mClose)="newModal()">
  <ng-container *m-modal-header>
    {{'web.code-system-concept-version.designation.add-designation'| translate}}
  </ng-container>

  <ng-container *m-modal-content>
    <form #modalForm="ngForm">
      <m-form-item mName="designationType" mLabel="entities.designation.type" required>
        <m-select  [loading]="loading['properties']"
            [(ngModel)]="modalData.designation.designationTypeId"
            name="designationType"
            placeholder="marina.ui.inputs.search.placeholder"
            icon="search"
            required>
          <m-option *ngFor="let prop of entityProperties" [value]="prop.id" [label]="prop.name"></m-option>
        </m-select>
      </m-form-item>
    </form>
  </ng-container>

  <div *m-modal-footer class="tw-button-group">
    <m-button mDisplay="text" (click)="newModal()">{{'core.btn.cancel' | translate}}</m-button>
    <m-button mDisplay="primary" (click)="confirmModal()">{{'core.btn.confirm' | translate}}</m-button>
  </div>
</m-modal>
