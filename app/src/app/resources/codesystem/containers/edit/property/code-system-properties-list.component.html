<m-card class="m-card-inside">
  <div *m-card-header class="m-items-between">
    <div class="m-card-title">
      {{'entities.code-system.properties' | translate}}
    </div>
    <m-dropdown>
      <twa-add-button *m-dropdown-container icon="down" placement="right">
        {{'web.code-system.form.properties.add-property' | translate}}
      </twa-add-button>

      <a *m-dropdown-item [routerLink]="['../entity-properties/add']">
        {{'web.code-system.form.properties.add-property' | translate}}
      </a>
      <a *m-dropdown-item [routerLink]="['../supplements/add']" [queryParams]="{targetType: 'EntityProperty'}">
        {{'web.code-system.form.properties.add-supplement' | translate}}
      </a>
    </m-dropdown>
  </div>

  <m-table [mData]="properties" [mLoading]="loading" mEnablePagination mHideOnSinglePage>
    <tr *mTableHead>
      <th>{{'entities.entity-property.name' | translate}}</th>
      <th>{{'entities.entity-property.type' | translate}}</th>
      <th>{{'entities.entity-property.description' | translate}}</th>
      <th></th>
      <th>{{'entities.entity-property.status' | translate}}</th>
      <th class="tw-table-actions"></th>
    </tr>

    <tr *mTableRow="let property">
      <td>
        <a [routerLink]="property.supplementId? ['../supplements/', property.supplementId, 'edit'] : ['../entity-properties/', property.id, 'edit']">{{property.name}}</a>
      </td>
      <td>{{property.type | localizedConceptName: {valueSet: 'concept-property-type'} | async}}</td>
      <td><m-abbreviate [mValue]="property.description" [mLength]="40"></m-abbreviate></td>
      <td class="tw-table-min-width">
        <m-icon *ngIf="property.supplementId" [mCode]="'block'" m-popover [mContent]="'web.supplement.supplement' | translate"></m-icon> <!--todo better icon for supplement-->
      </td>
      <td class="tw-table-min-width">
        <twa-status-tag [status]="property.status"></twa-status-tag>
      </td>
      <td class="tw-table-actions">
        <m-dropdown>
          <a *m-dropdown-item (click)="deleteProperty(property.id)">
            {{'web.code-system.form.properties.delete-property' | translate}}
          </a>
        </m-dropdown>
      </td>
    </tr>

    <tr *mTableNoData>
      <td colspan="6">
        <m-no-data></m-no-data>
      </td>
    </tr>
  </m-table>
</m-card>
