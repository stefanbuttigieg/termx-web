<m-card class="m-card-inside">
  <div *m-card-header class="m-items-between">
    <div class="m-card-title">
      {{'entities.value-set-version.concepts' | translate}}
    </div>
    <twa-add-button *ngIf="!viewMode" [routerLink]="['../concepts/add']">
      {{'web.value-set-version.form.add-concept' | translate}}
    </twa-add-button>
  </div>

  <m-table [mData]="concepts" mHideOnSinglePage>
    <tr *mTableHead>
      <th>{{'entities.value-set-version-concept.concept' | translate}}</th>
      <th>{{'entities.value-set-version-concept.display' | translate}}</th>
      <th>{{'entities.value-set-version-concept.additional-designations' | translate}}</th>
      <th *ngIf="!viewMode" class="tw-table-actions"></th>
    </tr>

    <ng-container *mTableRow="let item; let i = index">
      <tr *ngFor="let ad of item.additionalDesignations; let isFirst = first">
        <td *ngIf="isFirst" [rowSpan]="item.additionalDesignations?.length">
          <a *ngIf="!viewMode && ('*.value-set.edit' | twaHasAnyPrivilege); else view" [routerLink]="['../concepts',item.id,'edit']">{{item.concept?.code}}</a>
          <ng-template #view>
            {{item.concept?.code}}
          </ng-template>
        </td>
        <td *ngIf="isFirst" [rowSpan]="item.additionalDesignations?.length">
          {{item.display?.name}}
        </td>
        <td>{{ad.language}} | {{ad.name}}</td>
      </tr>

      <tr *ngIf="!(item.additionalDesignations?.length > 0)">
        <td>
          <a *ngIf="!viewMode && ('*.value-set.edit' | twaHasAnyPrivilege); else view" [routerLink]="['../concepts',item.id,'edit']">{{item.concept?.code}}</a>
          <ng-template #view>
            {{item.concept?.code}}
          </ng-template>
        </td>
        <td style="max-width: 20rem;">
          {{item.display?.name}}
        </td>
        <td style="max-width: 20rem;"></td>
        <td *ngIf="!viewMode" class="tw-table-actions">
          <m-button mDisplay="link" (click)="deleteConcept(item.id)">{{'core.btn.delete' | translate}}</m-button>
        </td>
      </tr>
    </ng-container>

    <tr *mTableNoData>
      <td colspan="4">
        <m-no-data></m-no-data>
      </td>
    </tr>
  </m-table>
</m-card>
