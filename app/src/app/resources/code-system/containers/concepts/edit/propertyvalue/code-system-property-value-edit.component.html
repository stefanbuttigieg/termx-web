<m-no-data *ngIf="!propertyValues?.length"/>

<ng-container *ngFor="let pv of propertyValues | sort: 'entityPropertyId' | filter: filterPropertyValue; let i = index">
  <ng-container *ngIf="viewMode">
    <div class="m-items-middle">
      <span style="white-space: nowrap" class="m-subtitle">{{pv.entityProperty}}</span>
      <tw-property-value-input [ngModel]="pv.value" [property]="pv.entityPropertyId | apply: getProperty: properties" [codeSystem]="codeSystemId" viewMode/>
    </div>
  </ng-container>

  <ng-container *ngIf="!viewMode">
    <form #form="ngForm">
      <div class="m-items-middle">
        <span style="white-space: nowrap" class="m-subtitle">{{pv.entityProperty}}</span>
        <m-form-item style="width: 100%" *ngIf="pv.entityPropertyId" mName="{{i}}-propertyValue">
          <tw-property-value-input [(ngModel)]="pv.value"
              name="{{i}}-propertyValue"
              [property]="pv.entityPropertyId | apply:getProperty:properties"
              [codeSystem]="codeSystemId"
              [required]="(i | apply:isRequired:properties)"></tw-property-value-input>
        </m-form-item>
      </div>
    </form>
  </ng-container>
</ng-container>

