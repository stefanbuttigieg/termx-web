<div class="tw-flex-container">
  <div *ngIf="designations?.length">
    <ng-container *ngIf="designations | apply: collectDesignations as groups">
      <ng-container *ngFor="let dType of groups | keys">
        <div class="m-subtitle">{{dType}}</div>
        <div class="col">
          <ng-container *ngFor="let d of groups[dType] | sort: 'language'; let i = index">
            <div *ngIf="viewMode" class="m-justify-between offset">
              <div class="m-items-middle">
                <span class="italic">{{d.language}}</span>
                <span>|</span>
                <span>{{d.name}}</span>
              </div>
              <div class="m-items-middle">
                <span>{{d.caseSignificance}}</span>
                <m-icon [mOptions]="{nzTheme : d.preferred ? 'fill' : 'outline'}" [mCode]="'star'"/>
                <span class="tw-circled" [style.color]="d.status === 'draft' ? 'var(--color-amber-7)' : 'initial'">{{d.status?.[0] | uppercase}}</span>
              </div>
            </div>
            <div *ngIf="!viewMode" class="m-items-middle">
              <span class="italic">{{d.language}}</span>
              <m-input name="{{i}}-name" [(ngModel)]="d.name" style="width: 200%"></m-input>
              <m-select name="{{i}}-caseSignificance" [(ngModel)]="d.caseSignificance" [allowClear]="false">
                <m-option mValue="ci" m-tooltip mLabel="ci"></m-option>
                <m-option mValue="cs" m-tooltip mLabel="cs"></m-option>
                <m-option mValue="cl" m-tooltip mLabel="cl"></m-option>
              </m-select>
              <m-button (mClick)="d.preferred = !d.preferred">
                <m-icon [mOptions]="{nzTheme : d.preferred ? 'fill' : 'outline'}" [mCode]="'star'"></m-icon>
              </m-button>
              <tw-value-set-concept-select name="{{i}}-status"
                  [(ngModel)]="d.status"
                  valueSet="publication-status"
                  [allowClear]="false"></tw-value-set-concept-select>
            </div>
          </ng-container>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
